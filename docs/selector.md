# 选择器

除了行内样式，其它样式要想应用到 `HTML` 中都要先通过选择器选中元素。

## 种类

### 普通选择器

* 全局选择器 `* {}`
* 元素选择器 `h1 {}`
* ID选择器 `#id {}`
* 类选择器 `.class {}`
* 属性选择器 `a[title] {}`
  * 含有属性 `a[title]`
  * `=` 属性值等于 `a[href="https://example.com"]`
  * `~=` 属性值列表中包括该字符串 `a[class~="special"]` `class` 有多个值，其中一个为 `special`
  * `|=` 属性值等于或以此及`-`开头 `div[lang|="zh"]` 匹配lang属性等于 `zh` 或以`zh-`开头
  * `^=` 属性值以字符串开头
  * `$=` 属性值以字符串结尾
  * `*=` 属性值包含该字符串
  * `i` 大小写不敏感，`li[class^="a" i]`

### 伪类

偏重于元素的特定状态信息，表现得就像在元素中添加类一样，以 `:` 开头

#### 位置

child，同一父元素下第几个元素

* `:first-child`
* `:last-child`
* `:nth-child`，按照 `an+b` 的格式进行匹配
* `:nth-last-child` 倒数
* `:only-child`

`of type`，可以与类型选择器结合合，选择同一父元素下该类型的第几个元素

* `:first-of-type`
* `:last-of-type`
* `:nth-of-type`
* `:nth-last-of-type`
* `:only-of-type`

与元素选择器结合两者的区别，

* child，根据子元素列表的位置信息选择元素，然后取和元素选择器的交集
* of type，先应用元素选择器，再通过位置信息计算结果

#### 用户行为状态

* `:hover` 鼠标悬浮状态
* `:focus` 聚焦状态
* `:active` 激活
* `:link` 未曾访问的链接
* `:visited` 已访问链接

#### 表单

* `:invalid` 不合法的表单输入
* `:blank` 空输入框

#### 其它

* `:not()` 取非
* `:root` 根元素

### 伪元素

表现得就像你插入了全新的 `HTML` 元素一样，以 `::` 开头

* `::before` 元素前插入伪元素
* `::after` 元素后插入伪元素
* `::first-line` 元素的第一行
* `::first-letter` 元素的第一个字母
* `::selection` 被鼠标选中的部分
* `::marker` 列表元素前的标记

### 组选择器

使用逗号分隔，多个选择器应用同一规则

### 关系选择器

| 类型           | 分隔符 |
| -------------- | ------ |
| 后代选择器     | 空格   |
| 直接后代选择器       | >      |
| 弟弟选择器     | ~      |
| 相邻第弟选择器 | +      |
| 合并选择器     | 无     |

## 优先级

当同一元素应用多条冲突的样式声明时，根据优先级确定最终样式。

### 层叠

1. 特异性大的优先级高
2. 特异性相同，位置靠后的优先级高
3. `@layer` 普通样式，后面的layer优先级高，`!important` 相反

#### 特异性

样式声明特异性权重如下

| 权重 | 名字 |
| :--- | :---: |
| 1-0-0-0 | 行内样式 |
| 0-1-0-0 | id选择器 |
| 0-0-1-0 | 类、伪类、属性选择器 |
| 0-0-0-1 | 元素、伪元素选择器 |

`*`，关系选择器和 `:not` 符号本身不影响特异性。

低权重声明再多，权重也不会超过高级权重。

样式声明后加 `!important` 特异性最高

#### 位置信息

选择器特异性相同的情况下，根据层叠关系确定最终样式。

* 自定义样式 > 浏览器设置样式 > 浏览器默认样式 > 自动继承样式
* 特异性相同时，最后声明的样式会被应用

#### @layer

layer可突破特异性的限制，后声明的layer普通属性优先级高，通过!important声明的样式优先级低。
不在layer中声明的样式，作为未命名layer放在最后

### 继承

部分样式可以自动继承，比如颜色，字体等。

继承关系是根据 `HTML` 元素的上下级结构决定的。

所有样式的属性都可以指定为继承，相关的值有以下五种

* `inherit` 与父元素相同
* `initial` 属性的原始值
* `revert` 浏览器默认值
* `revert-layer`
* `unset` 如果该属性可以自动继承，就继承，否则就是属性的原始值。
